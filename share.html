<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>LeoCore Shared Chat</title>

<style>
/* ===== GLOBAL & THEME ===== */
:root {
  --neon: #00ffcc;
  --bg: #050a14;
  --glass: rgba(255, 255, 255, 0.03);
  --border: rgba(255, 255, 255, 0.08);
}

body {
  margin: 0;
  background: var(--bg);
  color: #e0e0e0;
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  overflow-x: hidden;
}

/* ===== ANIMATED BACKGROUND ===== */
.bg-glow {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: radial-gradient(circle at 50% -20%, rgba(0, 255, 204, 0.15), transparent 50%);
  z-index: -1;
}

/* ===== HEADER ===== */
.header {
  padding: 24px;
  text-align: center;
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  position: sticky;
  top: 0; z-index: 100;
}

.header h1 {
  margin: 0; font-size: 18px; font-weight: 700;
  letter-spacing: 1px; color: var(--neon);
  text-transform: uppercase;
}

/* ===== WRAPPER ===== */
.wrapper {
  max-width: 650px;
  margin: 0 auto;
  padding: 20px 16px;
}

/* ===== INFO CARD ===== */
.infoCard {
  background: var(--glass);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 24px;
}

.meta {
  display: flex; gap: 12px;
  font-size: 12px; color: #888;
  margin-top: 8px;
}

/* ===== MESSAGES ===== */
.chat { display: flex; flex-direction: column; gap: 20px; }

.msg {
  display: flex; gap: 12px;
  animation: fadeInUp 0.4s ease forwards;
}

.msg.user { flex-direction: row; }
.msg.leocore { flex-direction: row; }

/* AVATARS */
.avatar {
  width: 32px; height: 32px;
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-weight: 800; font-size: 12px; flex-shrink: 0;
}

.u-avatar { background: #1a2333; border: 1px solid #303b50; color: #648aff; }
.ai-avatar { background: rgba(0, 255, 204, 0.1); border: 1px solid var(--neon); color: var(--neon); }

/* BUBBLES */
.bubble {
  font-size: 15px; line-height: 1.6;
  max-width: calc(100% - 44px);
}

.msg.user .bubble { color: #ccc; }
.msg.leocore .bubble { color: #eee; }

/* CTA BUTTON */
.cta-wrap {
  margin-top: 40px; text-align: center;
  padding-bottom: 60px;
}

.btn-primary {
  background: var(--neon);
  color: #000;
  padding: 12px 32px;
  border-radius: 50px;
  text-decoration: none;
  font-weight: 700;
  font-size: 14px;
  transition: transform 0.2s;
  display: inline-block;
}

.btn-primary:active { transform: scale(0.95); }

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>

<body>
<div class="bg-glow"></div>

<div class="header">
  <h1>LeoCore Shared</h1>
</div>

<div class="wrapper">
  <div class="infoCard">
      <div style="font-size: 14px; font-weight: 600;">Intelligence Briefing</div>
      <div class="meta">
        <span id="msgCount">—</span>
        <span id="date">—</span>
      </div>
  </div>

  <div id="chat" class="chat"></div>

  <div class="cta-wrap">
    <a href="https://leocore.vercel.app" class="btn-primary">Try LeoCore AI Free</a>
  </div>
</div>


</style>
</head>

<script>

(async ()=>{
  const params = new URLSearchParams(window.location.search);
  let id = params.get("id");

  if(!id){
    const parts = window.location.pathname.split("/");
    id = parts.pop() || parts.pop();
  }

  const chatBox = document.getElementById("chat");

  if(!id){
    chatBox.innerHTML = "<h2>No ID Provided.</h2>";
    return;
  }

  const res = await fetch(`https://leocore.onrender.com/api/share/${id}`);

  if(!res.ok){
    chatBox.innerHTML = "<h2>Chat Not Found.</h2>";
    return;
  }

  const chat = await res.json();

  document.getElementById("msgCount").innerText = `Messages: ${chat.length}`;
  document.getElementById("date").innerText = "Date: " + new Date().toLocaleString();

  chat.forEach(m=>{
    const bubble = document.createElement("div");
    bubble.className = "msg " + (m.role==="user" ? "user" : "leocore");

    const avatar = document.createElement("div");
    avatar.className = "avatar " + (m.role==="user" ? "u" : "ai");
    avatar.textContent = m.role==="user" ? "U" : "L";

    const text = document.createElement("span");
    text.textContent = m.content || "";

    bubble.appendChild(avatar);
    bubble.appendChild(text);
    chatBox.appendChild(bubble);
  });

})();
</script>
</body>
</html>