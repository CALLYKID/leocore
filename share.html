<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>LeoCore Shared Chat</title>

<style>

/* ===== GLOBAL ===== */
:root{
  --neon-a:#00ffe7;
  --neon-b:#48a6ff;
  --neon-c:#ff44f6;
}

body{
  margin:0;
  background:#020b16;
  color:white;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}

/* ===== HEADER BAR ===== */
.header{
  width:100%;
  background:linear-gradient(135deg, rgba(0,255,200,0.15), rgba(0,150,255,0.15));
  border-bottom:1px solid rgba(0,255,200,0.4);
  padding:18px;
  text-align:center;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  position:sticky;
  top:0;
  z-index:20;
}

.header h1{
  margin:0;
  font-size:20px;
  letter-spacing:.5px;
}

/* ===== CARD WRAPPER ===== */
.wrapper{
  max-width:900px;
  margin:20px auto;
  padding:12px;
}

/* ===== CHAT INFO PANEL ===== */
.infoCard{
  background:linear-gradient(140deg, rgba(0,180,255,0.15), rgba(0,255,140,0.14));
  border:1px solid rgba(0,255,200,0.5);
  border-radius:18px;
  padding:18px;
  margin-bottom:14px;
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

.meta{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  opacity:.8;
}

/* ===== CHAT ===== */
.chat{
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* ===== MESSAGE BUBBLES ===== */
.msg{
  padding:14px 14px;
  border-radius:14px;
  max-width:95%;
  animation:pop .3s ease;
  display:flex;
  gap:10px;
}

.msg span{
  line-height:1.45rem;
}

/* user bubble */
.user{
  background:#0b1220;
  border:1px solid #2c3b50;
  align-self:flex-start;
}

/* leocore bubble */
.leocore{
  align-self:flex-end;
  background:linear-gradient(140deg, rgba(0,255,200,0.12), rgba(0,160,255,0.1));
  border:1px solid rgba(0,255,200,0.45);
}

/* ===== AVATARS ===== */
.avatar{
  width:32px;
  height:32px;
  border-radius:50%;
  background:#09101f;
  border:1px solid rgba(255,255,255,.4);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
}

/* user avatar */
.avatar.u{
  border-color:#648aff;
}

/* AI avatar */
.avatar.ai{
  border-color:#00ffc6;
}

/* ===== ANIMATIONS ===== */
@keyframes pop{
  from{ transform:translateY(6px); opacity:0; }
  to{ transform:translateY(0); opacity:1;}
}

footer{
  opacity:.6;
  text-align:center;
  font-size:12px;
  margin-top:18px;
}

</style>
</head>

<body>

<div class="header">
  <h1>Shared LeoCore Conversation</h1>
</div>

<div class="wrapper">

  <div class="infoCard">
      <h3 style="margin:0 0 6px 0;">Conversation Details</h3>
      <div class="meta">
        <div id="msgCount">Messages: loading…</div>
        <div id="date">Date: loading…</div>
      </div>
  </div>

  <div id="chat" class="chat"></div>

  <footer>LeoCore — Fast Free AI. Built different.</footer>

</div>

<script>

(async ()=>{
  const params = new URLSearchParams(window.location.search);
  let id = params.get("id");

  if(!id){
    const parts = window.location.pathname.split("/");
    id = parts.pop() || parts.pop();
  }

  const chatBox = document.getElementById("chat");

  if(!id){
    chatBox.innerHTML = "<h2>No ID Provided.</h2>";
    return;
  }

  const res = await fetch(`https://leocore.onrender.com/api/share/${id}`);

  if(!res.ok){
    chatBox.innerHTML = "<h2>Chat Not Found.</h2>";
    return;
  }

  const chat = await res.json();

  document.getElementById("msgCount").innerText = `Messages: ${chat.length}`;
  document.getElementById("date").innerText = "Date: " + new Date().toLocaleString();

  chat.forEach(m=>{
    const bubble = document.createElement("div");
    bubble.className = "msg " + (m.role==="user" ? "user" : "leocore");

    const avatar = document.createElement("div");
    avatar.className = "avatar " + (m.role==="user" ? "u" : "ai");
    avatar.textContent = m.role==="user" ? "U" : "L";

    const text = document.createElement("span");
    text.textContent = m.content || "";

    bubble.appendChild(avatar);
    bubble.appendChild(text);
    chatBox.appendChild(bubble);
  });

})();
</script>
</body>
</html>